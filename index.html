import React, { useState, useEffect, createContext, useContext } from 'react';

// --- Firebase & Datenbank Simulation ---

const firebaseConfig = { /* ... Platzhalter ... */ };

// MOCK DATENBANK
const initialMockEvents = [
    { id: '1', title: 'Kirmes 2025', date: '2025-08-22T18:00:00', location: 'Festplatz Kripp', description: 'Die traditionelle Kirmes mit Live-Musik und Fassanstich.' },
    { id: '2', title: 'St. Martinsumzug', date: '2024-11-11T17:00:00', location: 'Grundschule Kripp', description: 'Wir begleiten den Martinsumzug durch den Ort.' },
    { id: '3', title: 'Vereinsinterne Weihnachtsfeier', date: '2024-12-14T19:00:00', location: 'Hotel Rhein-Ahr', description: 'Gemütliches Beisammensein zum Jahresabschluss.' },
    { id: '4', title: 'Mai-Fest', date: '2025-04-30T19:00:00', location: 'Marktplatz', description: 'Tanz in den Mai mit Maibaumstellen.' },
];
const initialMockGalleries = [
    { id: 'g1', title: 'Kirmes 2024 Impressionen', eventDate: '2024-08-23', imageCount: 3, coverImageUrl: 'https://placehold.co/600x400/0f172a/94a3b8?text=Kirmes+2024' },
    { id: 'g2', title: 'Vatertagstour 2024', eventDate: '2024-05-30', imageCount: 2, coverImageUrl: 'https://placehold.co/600x400/0f172a/94a3b8?text=Vatertagstour' },
];
const initialMockImages = {
    'g1': [
        { id: 'img1', url: 'https://placehold.co/1280x720/1e293b/94a3b8?text=Bild+1' },
        { id: 'img2', url: 'https://placehold.co/1280x720/1e293b/94a3b8?text=Bild+2' },
        { id: 'img3', url: 'https://placehold.co/1280x720/1e293b/94a3b8?text=Bild+3' },
    ],
    'g2': [
        { id: 'img4', url: 'https://placehold.co/1280x720/334155/94a3b8?text=Wanderung' },
        { id: 'img5', url: 'https://placehold.co/1280x720/334155/94a3b8?text=Rast' },
    ]
};
const initialMockPageContent = {
    'kirmes': `<h1>Die Kripper Kirmes – Herzstück unseres Vereinsjahres</h1><p>Jedes Jahr im August schlägt das Herz von Kripp höher...`, // Gekürzt für Übersichtlichkeit
};
const initialMockVereinData = [
    { id: 'vorstand', name: 'Gesamtvorstand', description: 'Der Vorstand leitet die Geschicke des Vereins und vertritt ihn nach außen.', members: [ { role: 'Präsident', name: 'Max Mustermann' }, { role: 'Hauptmann', name: 'Peter Pan' }, { role: 'Leutnant', name: 'Hans Guckindieluft' }, { role: '1. Kassierer', name: 'Gerd Geld' }, { role: '2. Kassierer', name: 'Klaus Kleingeld' }, { role: '1. Schriftführer', name: 'Tim Tinte' }, { role: '2. Schriftführer', name: 'Fritz Feder' } ] },
    { id: 'martins', name: 'Martinsausschuss', description: 'Dieser Ausschuss organisiert den jährlichen St. Martinsumzug...', members: [ { role: 'Vorsitzender', name: 'Martin Mantel' }, { role: 'Beisitzer', name: 'Lara Laterne' }, { role: 'Kassenwart', name: 'Sven Spende' } ] },
    { id: 'fest', name: 'Festausschuss', description: 'Der Festausschuss ist das Herz der Organisation für unsere Kirmes...', members: [ { role: 'Vorsitzender', name: 'Fiona Feier' }, { role: 'Planung', name: 'Paul Planer' }, { role: 'Logistik', name: 'Leo Laster' }, { role: 'Thekenchef', name: 'Bastian Bier' } ] },
];
const initialMockBrauchtumData = [
    { id: 'maibaum', title: 'Maibaumstellen', description: 'In der Nacht zum 1. Mai stellen wir traditionell den Dorf-Maibaum auf...', icon: 'tree' },
    { id: 'kirmes', title: 'Die Kirmes', description: 'Unser absolutes Jahres-Highlight, das wir mit viel Herzblut organisieren...', icon: 'flag' },
    { id: 'martin', title: 'St. Martinsumzug', description: 'Wir sichern den Umzug ab und helfen den Kindern des Dorfes eine Freude zu machen.', icon: 'lantern' },
    { id: 'vater', title: 'Vatertagstour', description: 'Eine gesellige Wanderung nur für Mitglieder, die den Zusammenhalt stärkt.', icon: 'beer' },
];
const initialMockOrtsvereineData = [
    { id: 'ov1', name: 'Sportverein Kripp 1919 e.V.', description: 'Der größte Sportverein am Ort mit Fokus auf Fußball und Turnen.', link: '#', logoUrl: 'https://placehold.co/100x100/1e293b/f59e0b?text=SV' },
    { id: 'ov2', name: 'Möhne-Club "Rubbel-di-Katz" e.V.', description: 'Die treibende Kraft im Kripper Karneval.', link: '#', logoUrl: 'https://placehold.co/100x100/1e293b/f59e0b?text=MC' },
    { id: 'ov3', name: 'Freiwillige Feuerwehr Kripp', description: 'Unsere Kameraden, die für die Sicherheit im Ort sorgen.', link: '#', logoUrl: 'https://placehold.co/100x100/1e293b/f59e0b?text=FW' },
    { id: 'ov4', name: 'Kirchenchor "Cäcilia" Kripp', description: 'Sorgt für die musikalische Untermalung in der Pfarrkirche.', link: '#', logoUrl: 'https://placehold.co/100x100/1e293b/f59e0b?text=KC' },
];
const initialMockBackgrounds = {
    'home': { type: 'video', url: 'https://placehold.co/1920x1080.mp4?text=Vereinsleben+Video' },
    'termine': { type: 'image', url: 'https://placehold.co/1920x1080/0f172a/334155?text=Termine' },
    'kirmes': { type: 'image', url: 'https://placehold.co/1920x1080/0f172a/334155?text=Kirmes' },
    'galerie': { type: 'image', url: 'https://placehold.co/1920x1080/0f172a/334155?text=Galerie' },
    'verein': { type: 'image', url: 'https://placehold.co/1920x1080/0f172a/334155?text=Verein' },
    'brauchtum': { type: 'image', url: 'https://placehold.co/1920x1080/0f172a/334155?text=Brauchtum' },
    'ortsvereine': { type: 'image', url: 'https://placehold.co/1920x1080/0f172a/334155?text=Ortsvereine' },
};

// --- Kontexte für Authentifizierung & Datenbank ---
const AuthContext = createContext(null);
const FirestoreContext = createContext(null);

const AuthProvider = ({ children }) => { /* ... unverändert ... */ const [user, setUser] = useState(null); const [loading, setLoading] = useState(true); useEffect(() => { const timer = setTimeout(() => { setLoading(false); }, 1500); return () => clearTimeout(timer); }, []); const login = async (username, password) => { if (password === '1234') { setUser({ email: `${username}@jgv-kripp.local`, displayName: username, role: 'admin' }); return { success: true }; } else { return { success: false, error: 'Falscher Benutzername oder Passwort.' }; } }; const logout = async () => { setUser(null); }; const value = { user, loading, login, logout }; return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>; };
const useAuth = () => useContext(AuthContext);

const FirestoreProvider = ({ children }) => {
    const [events, setEvents] = useState(initialMockEvents);
    const [galleries, setGalleries] = useState(initialMockGalleries);
    const [images, setImages] = useState(initialMockImages);
    const [pageContent, setPageContent] = useState(initialMockPageContent);
    const [vereinData] = useState(initialMockVereinData);
    const [brauchtumData] = useState(initialMockBrauchtumData);
    const [ortsvereineData] = useState(initialMockOrtsvereineData);
    const [backgrounds, setBackgrounds] = useState(initialMockBackgrounds);

    const addEvent = (eventData) => { /* ... unverändert ... */ const newEvent = { ...eventData, id: Date.now().toString() }; setEvents(prev => [...prev, newEvent].sort((a, b) => new Date(a.date) - new Date(b.date))); };
    const updateEvent = (updatedEvent) => { /* ... unverändert ... */ setEvents(prev => prev.map(e => e.id === updatedEvent.id ? updatedEvent : e)); };
    const addGallery = (galleryData) => { /* ... unverändert ... */ const newGallery = { ...galleryData, id: Date.now().toString(), imageCount: 0, coverImageUrl: 'https://placehold.co/600x400/0f172a/94a3b8?text=Neue+Galerie' }; setGalleries(prev => [...prev, newGallery].sort((a, b) => new Date(b.eventDate) - new Date(a.eventDate))); setImages(prev => ({ ...prev, [newGallery.id]: [] })); };
    const updateGallery = (updatedGallery) => { /* ... unverändert ... */ setGalleries(prev => prev.map(g => g.id === updatedGallery.id ? updatedGallery : g)); };
    const addImagesToGallery = (galleryId, newImages) => { /* ... unverändert ... */ const imageObjects = newImages.map(img => ({ id: img.name + Date.now(), url: URL.createObjectURL(img) })); setImages(prev => ({ ...prev, [galleryId]: [...(prev[galleryId] || []), ...imageObjects] })); setGalleries(prev => prev.map(g => g.id === galleryId ? { ...g, imageCount: g.imageCount + newImages.length } : g)); };
    const updatePageContent = (pageKey, content) => { setPageContent(prev => ({ ...prev, [pageKey]: content })); };
    const updateBackground = (pageKey, bgData) => { setBackgrounds(prev => ({ ...prev, [pageKey]: bgData })); };

    const value = { events, galleries, images, pageContent, vereinData, brauchtumData, ortsvereineData, backgrounds, addEvent, updateEvent, addGallery, updateGallery, addImagesToGallery, updatePageContent, updateBackground };
    return <FirestoreContext.Provider value={value}>{children}</FirestoreContext.Provider>
};
const useFirestore = () => useContext(FirestoreContext);

// --- UI & Layout-Komponenten ---
const Header = ({ navigateTo, activePage }) => { const { user, logout } = useAuth(); const [isMenuOpen, setIsMenuOpen] = useState(false); const [isScrolled, setIsScrolled] = useState(false); useEffect(() => { const handleScroll = () => setIsScrolled(window.scrollY > 50); window.addEventListener('scroll', handleScroll); return () => window.removeEventListener('scroll', handleScroll); }, []); const navLinks = [ { page: 'home', label: 'Start' }, { page: 'termine', label: 'Termine' }, { page: 'kirmes', label: 'Kirmes' }, { page: 'galerie', label: 'Galerie' }, { page: 'verein', label: 'Unser Verein' }, { page: 'brauchtum', label: 'Brauchtum' }, { page: 'ortsvereine', label: 'Ortsvereine'}, ...(user ? [{ page: 'admin', label: 'Admin' }] : []) ]; const linkClasses = (page) => `relative cursor-pointer px-3 py-2 rounded-md text-sm font-medium transition-colors duration-300 ${activePage.page === page ? 'text-amber-400' : 'text-slate-300 hover:text-amber-400'} nav-link`; const mobileLinkClasses = (page) => `block cursor-pointer px-3 py-2 rounded-md text-base font-medium transition duration-300 ${activePage.page === page ? 'bg-slate-700 text-white' : 'text-slate-300 hover:bg-slate-700 hover:text-white'}`; const handleLogout = () => { logout(); navigateTo({ page: 'home' }); }; return ( <header className={`sticky top-0 z-50 transition-all duration-300 ${isScrolled ? 'bg-slate-900/80 backdrop-blur-sm shadow-lg' : 'bg-transparent'}`}> <div className="container mx-auto px-4 sm:px-6 lg:px-8"> <div className="flex items-center justify-between h-20"> <div className="flex-shrink-0 cursor-pointer" onClick={() => navigateTo({ page: 'home' })}> <div className="flex items-center space-x-3"> <div className="bg-slate-800 border-2 border-slate-700 w-12 h-12 rounded-full flex items-center justify-center"> <span className="text-xl font-black text-amber-400">JGV</span> </div> <span className="text-xl font-bold text-slate-100 hidden sm:inline-block">JGV Kripp</span> </div> </div> <nav className="hidden md:flex md:space-x-1 lg:space-x-2"> {navLinks.map(link => <a key={link.page} onClick={() => navigateTo({ page: link.page })} className={linkClasses(link.page)}>{link.label}</a>)} </nav> <div className="flex items-center space-x-4"> {user ? ( <div className="flex items-center space-x-4"> <span className="text-slate-300 text-sm hidden sm:block">Hallo, {user.displayName}</span> <a onClick={handleLogout} className="btn-secondary">Logout</a> </div> ) : ( <a onClick={() => navigateTo({ page: 'login' })} className="btn-primary">Login</a> )} </div> <div className="md:hidden flex items-center"> <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="text-slate-300 focus:outline-none"> <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d={isMenuOpen ? "M6 18L18 6M6 6l12 12" : "M4 6h16M4 12h16m-7 6h7"} /></svg> </button> </div> </div> </div> {isMenuOpen && (<div className="md:hidden bg-slate-900"><div className="px-2 pt-2 pb-3 space-y-1 sm:px-3">{navLinks.map(link => <a key={link.page} onClick={() => { navigateTo({ page: link.page }); setIsMenuOpen(false); }} className={mobileLinkClasses(link.page)}>{link.label}</a>)}</div></div>)} </header> ); };
const Footer = ({ navigateTo }) => { return ( <footer className="bg-slate-900 border-t border-slate-800"> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-12"> <div className="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left"> <div><h3 className="font-bold text-white text-lg">JGV "Einigkeit" 1862 Kripp e.V.</h3><p className="mt-2 text-slate-400">Eine starke Gemeinschaft am Rhein.</p></div> <div><h3 className="font-bold text-white text-lg">Navigation</h3><ul className="mt-2 space-y-2"><li><a onClick={() => navigateTo({ page: 'termine' })} className="text-slate-400 hover:text-amber-400 cursor-pointer">Termine</a></li><li><a onClick={() => navigateTo({ page: 'kirmes' })} className="text-slate-400 hover:text-amber-400 cursor-pointer">Kirmes</a></li><li><a onClick={() => navigateTo({ page: 'ortsvereine' })} className="text-slate-400 hover:text-amber-400 cursor-pointer">Ortsvereine</a></li></ul></div> <div><h3 className="font-bold text-white text-lg">Rechtliches</h3><ul className="mt-2 space-y-2"><li><a href="#" className="text-slate-400 hover:text-amber-400">Impressum</a></li><li><a href="#" className="text-slate-400 hover:text-amber-400">Datenschutz</a></li></ul></div> </div> <div className="mt-12 border-t border-slate-800 pt-8 text-center text-slate-500"><p>&copy; {new Date().getFullYear()} JGV Kripp e.V. Alle Rechte vorbehalten.</p></div> </div> </footer> ); };
const PageLayout = ({ children }) => <div className="flex flex-col min-h-screen"><main className="flex-grow relative">{children}</main></div>;
const Card = ({ children, className, ...props }) => <div className={`bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-xl shadow-lg ${className}`} {...props}>{children}</div>;
const PageTitle = ({ title, subtitle }) => ( <div className="text-center mb-12"> <h1 className="text-4xl sm:text-5xl font-bold text-white">{title}</h1> {subtitle && <p className="mt-4 text-lg text-slate-400">{subtitle}</p>} </div> );
const DynamicBackground = ({ pageKey }) => {
    const { backgrounds } = useFirestore();
    const bg = backgrounds[pageKey] || { type: 'none' };
    
    return (
        <div className="absolute inset-0 w-full h-full z-0 overflow-hidden">
            {bg.type === 'video' && (
                <video autoPlay loop muted playsInline className="w-auto min-w-full min-h-full max-w-none object-cover">
                    <source src={bg.url} type="video/mp4" />
                </video>
            )}
            {bg.type === 'image' && (
                <div className="w-full h-full bg-cover bg-center" style={{ backgroundImage: `url(${bg.url})` }}></div>
            )}
            <div className="absolute inset-0 bg-slate-900/80"></div>
            <div className="absolute inset-0 bg-grid-pattern opacity-10"></div>
        </div>
    );
};

// --- Seiten-Komponenten ---
const HomePage = ({ navigateTo }) => { const { events } = useFirestore(); const upcomingEvents = events.filter(event => new Date(event.date) >= new Date()).sort((a,b) => new Date(a.date) - new Date(b.date)).slice(0, 3); return ( <> <section className="relative h-screen flex items-center justify-center text-center overflow-hidden"> <div className="relative z-20 px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto"> <h1 className="text-4xl sm:text-6xl lg:text-7xl font-black text-white uppercase tracking-wider fade-in-up" style={{ animationDelay: '0.2s' }}> Junggesellenverein <br/><span className="text-gradient">"Einigkeit"</span> Kripp </h1> <p className="mt-6 text-lg sm:text-xl text-slate-300 max-w-2xl mx-auto fade-in-up" style={{ animationDelay: '0.4s' }}> Tradition, Gemeinschaft und unvergessliche Momente seit 1862. </p> <div className="mt-10 fade-in-up" style={{ animationDelay: '0.6s' }}> <a onClick={() => navigateTo({ page: 'termine' })} className="btn-primary cursor-pointer">Zu den Terminen</a> </div> </div> </section> <section className="relative py-20 sm:py-32"> <div className="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10"> <div className="text-center mb-16 fade-in"> <h2 className="text-3xl sm:text-4xl font-bold text-white">Nächste Termine</h2> <p className="mt-4 text-lg text-slate-400">Ein kleiner Ausblick auf das, was kommt.</p> </div> <div className="grid md:grid-cols-3 gap-8"> {upcomingEvents.map(event => <EventCard key={event.id} event={event} />)} </div> <div className="text-center mt-16 fade-in"> <a onClick={() => navigateTo({ page: 'termine' })} className="btn-primary cursor-pointer">Alle Termine anzeigen</a> </div> </div> </section> <section className="relative py-20 sm:py-32 border-t border-slate-800"> <div className="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10"> <div className="text-center mb-16 fade-in"> <h2 className="text-3xl sm:text-4xl font-bold text-white">Galerie</h2> <p className="mt-4 text-lg text-slate-400">Einblicke in unser Vereinsleben.</p> </div> <div className="text-center text-slate-400">Vorschau der letzten Galerie...</div> <div className="text-center mt-16 fade-in"> <a onClick={() => navigateTo({ page: 'galerie' })} className="btn-primary cursor-pointer">Alle Galerien ansehen</a> </div> </div> </section> </> ); };
const EventCard = ({ event }) => { const eventDate = new Date(event.date); const day = eventDate.toLocaleDateString('de-DE', { day: '2-digit' }); const month = eventDate.toLocaleDateString('de-DE', { month: 'short' }); return ( <Card className="flex flex-col text-center items-center p-8 card-hover-effect"> <div className="flex-shrink-0"> <div className="text-amber-400 font-black text-5xl">{day}</div> <div className="text-slate-300 uppercase text-lg">{month}</div> </div> <div className="mt-6 flex-grow"> <h3 className="font-bold text-white text-xl">{event.title}</h3> <p className="text-slate-400 mt-2">{event.location}</p> </div> </Card> ); };
const TerminePage = () => { const { events } = useFirestore(); const sortedEvents = [...events].sort((a,b) => new Date(a.date) - new Date(b.date)); return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"><PageTitle title="Alle Termine" subtitle="Verpasse keine unserer Veranstaltungen." /><div className="space-y-8 max-w-4xl mx-auto">{sortedEvents.map(event => {const eventDate = new Date(event.date); return (<Card key={event.id} className="p-6 md:flex items-center space-y-4 md:space-y-0 md:space-x-8"><div className="flex-shrink-0 text-center w-32"><div className="text-amber-400 font-black text-5xl">{eventDate.toLocaleDateString('de-DE', { day: '2-digit' })}</div><div className="text-slate-300 uppercase text-xl">{eventDate.toLocaleDateString('de-DE', { month: 'short' })}</div><div className="text-slate-400 text-sm">{eventDate.getFullYear()}</div></div><div className="flex-grow text-center md:text-left"><h2 className="text-2xl font-bold text-white">{event.title}</h2><p className="text-slate-400 mt-1">{event.location} • {eventDate.toLocaleTimeString('de-DE', { hour: '2-digit', minute: '2-digit' })} Uhr</p><p className="text-slate-300 mt-3">{event.description}</p></div></Card>)})}</div></div> </PageLayout> ); };
const GalleryCard = ({ gallery, onClick }) => { const galleryDate = new Date(gallery.eventDate); return ( <Card onClick={onClick} className="overflow-hidden cursor-pointer card-hover-effect group p-0"><div className="h-48 bg-slate-700 relative"><img src={gallery.coverImageUrl} alt={gallery.title} className="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105" /><div className="absolute inset-0 bg-black/40"></div></div><div className="p-6"><h3 className="font-bold text-white text-xl truncate">{gallery.title}</h3><p className="text-slate-400 mt-2 text-sm">{galleryDate.toLocaleDateString('de-DE', { year: 'numeric', month: 'long', day: 'numeric' })}</p><p className="text-slate-500 mt-1 text-xs">{gallery.imageCount} Bilder</p></div></Card> ); };
const GaleriePage = ({ navigateTo }) => { const { galleries } = useFirestore(); const sortedGalleries = [...galleries].sort((a,b) => new Date(b.eventDate) - new Date(a.eventDate)); return ( <PageLayout><div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"><PageTitle title="Bildergalerien" subtitle="Momente für die Ewigkeit." /><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">{sortedGalleries.map(gallery => <GalleryCard key={gallery.id} gallery={gallery} onClick={() => navigateTo({ page: 'galleryDetail', galleryId: gallery.id })} />)}</div></div></PageLayout> ); };
const ContentPage = ({ pageKey, title, subtitle }) => { const { pageContent } = useFirestore(); const content = pageContent[pageKey] || `<p>Inhalt für diese Seite wird noch geladen...</p>`; return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"> <PageTitle title={title} subtitle={subtitle} /> <div className="prose prose-invert prose-lg max-w-4xl mx-auto" dangerouslySetInnerHTML={{ __html: content }} /> </div> </PageLayout> ); };
const UnserVereinPage = () => { /* ... unverändert ... */ const { vereinData } = useFirestore(); const [selectedCommittee, setSelectedCommittee] = useState(vereinData[0]); return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"> <PageTitle title="Ein starkes Team: Unser Verein" subtitle="Die Menschen, die den Verein mit Leben füllen und unsere Traditionen hochhalten." /> <div className="flex justify-center mb-12"> <div className="flex space-x-2 bg-slate-800 p-2 rounded-lg"> {vereinData.map(c => ( <button key={c.id} onClick={() => setSelectedCommittee(c)} className={`px-4 py-2 text-sm font-semibold rounded-md transition ${selectedCommittee.id === c.id ? 'bg-amber-500 text-white' : 'text-slate-300 hover:bg-slate-700'}`}> {c.name} </button> ))} </div> </div> <div className="max-w-4xl mx-auto text-center"> <h2 className="text-2xl font-bold text-white mb-2">{selectedCommittee.name}</h2> <p className="text-slate-400 mb-8">{selectedCommittee.description}</p> <div className="grid grid-cols-2 md:grid-cols-3 gap-6"> {selectedCommittee.members.map(member => ( <Card key={member.name} className="p-4"> <h3 className="font-bold text-white">{member.name}</h3> <p className="text-amber-400 text-sm">{member.role}</p> </Card> ))} </div> </div> </div> </PageLayout> ); };
const BrauchtumPage = () => { /* ... unverändert ... */ const { brauchtumData } = useFirestore(); const icons = { tree: <path strokeLinecap="round" strokeLinejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m-3 0h3m-6.03-2.52 2.5-2.5-2.5-2.5m5.06 5.02-2.5-2.5 2.5-2.5" />, flag: <path strokeLinecap="round" strokeLinejoin="round" d="M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5" />, lantern: <path strokeLinecap="round" strokeLinejoin="round" d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.47 2.118L2.25 18.25a2.25 2.25 0 0 1 2.25-2.25h1.5a2.25 2.25 0 0 1 2.25 2.25v.75a2.25 2.25 0 0 0 5.78-1.128 2.25 2.25 0 0 1 2.47-2.118l.228.068a2.25 2.25 0 0 1 2.248 2.249l-.002.001a2.25 2.25 0 0 1-2.25 2.25h-1.5a2.25 2.25 0 0 1-2.25-2.25v-.75m-7.5-6.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.47 2.118L2.25 12.25a2.25 2.25 0 0 1 2.25-2.25h1.5a2.25 2.25 0 0 1 2.25 2.25v.75a2.25 2.25 0 0 0 5.78-1.128 2.25 2.25 0 0 1 2.47-2.118l.228.068a2.25 2.25 0 0 1 2.248 2.249l-.002.001a2.25 2.25 0 0 1-2.25 2.25h-1.5a2.25 2.25 0 0 1-2.25-2.25v-.75" />, beer: <path strokeLinecap="round" strokeLinejoin="round" d="m.75 4.5 1.5 1.5-1.5 1.5m1.5-3 1.5 1.5-1.5 1.5m1.5-3 1.5 1.5-1.5 1.5m1.5-3 1.5 1.5-1.5 1.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" /> }; return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"> <PageTitle title="Gelebte Tradition seit 1862" subtitle="Das Fundament unseres Vereins: Bräuche, die uns verbinden und unsere Geschichte erzählen." /> <div className="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"> {brauchtumData.map(item => ( <Card key={item.id} className="p-8 text-center card-hover-effect"> <div className="flex justify-center mb-4"> <div className="bg-slate-700/50 p-4 rounded-full"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className="w-8 h-8 text-amber-400"> {icons[item.icon] || icons['flag']} </svg> </div> </div> <h3 className="text-xl font-bold text-white mb-2">{item.title}</h3> <p className="text-slate-400">{item.description}</p> </Card> ))} </div> </div> </PageLayout> ); };
const OrtsvereinePage = () => { const { ortsvereineData } = useFirestore(); return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"> <PageTitle title="Ortsvereine in Kripp" subtitle="Gemeinsam stark für unser Dorf – eine Übersicht befreundeter Vereine." /> <div className="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto"> {ortsvereineData.map(verein => ( <Card key={verein.id} className="p-6 flex items-center space-x-6 card-hover-effect"> <img src={verein.logoUrl} alt={`${verein.name} Logo`} className="w-24 h-24 rounded-full flex-shrink-0" /> <div> <h3 className="text-xl font-bold text-white">{verein.name}</h3> <p className="text-slate-400 mt-2">{verein.description}</p> <a href={verein.link} target="_blank" rel="noopener noreferrer" className="text-amber-400 hover:text-amber-300 mt-4 inline-block">Zur Webseite &rarr;</a> </div> </Card> ))} </div> </div> </PageLayout> ); };
const LoginPage = ({ navigateTo }) => { /* ... unverändert ... */ const { login } = useAuth(); const [username, setUsername] = useState(''); const [password, setPassword] = useState(''); const [error, setError] = useState(''); const [loading, setLoading] = useState(false); const handleLogin = async (e) => { e.preventDefault(); setError(''); setLoading(true); const result = await login(username, password); setLoading(false); if (result.success) { navigateTo({ page: 'admin' }); } else { setError(result.error); } }; return <PageLayout><div className="min-h-screen flex justify-center items-center"><div className="w-full max-w-md px-4"><Card className="p-8"><h1 className="text-3xl font-bold text-white mb-6 text-center">Mitglieder-Login</h1><form onSubmit={handleLogin} className="space-y-6"><div><label className="block text-sm font-medium text-slate-300 mb-2" htmlFor="username">Benutzername</label><input type="text" id="username" value={username} onChange={(e) => setUsername(e.target.value)} className="w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-amber-500" required /></div><div><label className="block text-sm font-medium text-slate-300 mb-2" htmlFor="password">Passwort</label><input type="password" id="password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full bg-slate-700 border border-slate-600 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-amber-500" required /></div>{error && <p className="text-red-400 text-sm text-center">{error}</p>}<button type="submit" disabled={loading} className="btn-primary mt-4 w-full flex justify-center items-center">{loading ? 'Prüfe...' : 'Einloggen'}</button></form></Card></div></div></PageLayout>; };
const EventForm = ({ event, onSave, onCancel }) => { /* ... unverändert ... */ const [formData, setFormData] = useState(event || { title: '', date: '', location: '', description: '' }); const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value }); const handleSubmit = (e) => { e.preventDefault(); onSave(formData); }; return (<Card className="mt-6 p-6"><h3 className="text-xl font-bold text-white mb-4">{event ? 'Termin bearbeiten' : 'Neuen Termin erstellen'}</h3><form onSubmit={handleSubmit} className="space-y-4"><input name="title" value={formData.title} onChange={handleChange} placeholder="Titel" className="input-field" required /><input name="date" type="datetime-local" value={formData.date} onChange={handleChange} className="input-field" required /><input name="location" value={formData.location} onChange={handleChange} placeholder="Ort" className="input-field" required /><textarea name="description" value={formData.description} onChange={handleChange} placeholder="Beschreibung" className="input-field" rows="4" required /><div className="flex justify-end space-x-4"><button type="button" onClick={onCancel} className="btn-secondary">Abbrechen</button><button type="submit" className="btn-primary">Speichern</button></div></form></Card>); };
const GalleryForm = ({ gallery, onSave, onCancel }) => { /* ... unverändert ... */ const [formData, setFormData] = useState(gallery || { title: '', eventDate: ''}); const handleChange = (e) => setFormData({ ...formData, [e.target.name]: e.target.value }); const handleSubmit = (e) => { e.preventDefault(); onSave(formData); }; return (<Card className="mt-6 p-6"><h3 className="text-xl font-bold text-white mb-4">{gallery ? 'Galerie bearbeiten' : 'Neue Galerie erstellen'}</h3><form onSubmit={handleSubmit} className="space-y-4"><input name="title" value={formData.title} onChange={handleChange} placeholder="Titel" className="input-field" required /><input name="eventDate" type="date" value={formData.eventDate} onChange={handleChange} className="input-field" required /><div className="flex justify-end space-x-4"><button type="button" onClick={onCancel} className="btn-secondary">Abbrechen</button><button type="submit" className="btn-primary">Speichern</button></div></form></Card>); };
const Lightbox = ({ images, startIndex, onClose }) => { /* ... unverändert ... */ const [currentIndex, setCurrentIndex] = useState(startIndex); const goToPrevious = () => setCurrentIndex((prev) => (prev > 0 ? prev - 1 : images.length - 1)); const goToNext = () => setCurrentIndex((prev) => (prev < images.length - 1 ? prev + 1 : 0)); useEffect(() => { const handleKeyDown = (e) => { if (e.key === 'ArrowRight') goToNext(); if (e.key === 'ArrowLeft') goToPrevious(); if (e.key === 'Escape') onClose(); }; window.addEventListener('keydown', handleKeyDown); return () => window.removeEventListener('keydown', handleKeyDown); }, []); return ( <div className="fixed inset-0 bg-black/90 z-50 flex items-center justify-center" onClick={onClose}> <button className="absolute top-4 right-4 text-white text-4xl">&times;</button> <button onClick={(e) => { e.stopPropagation(); goToPrevious(); }} className="absolute left-4 text-white text-4xl p-4">&#8249;</button> <img src={images[currentIndex].url} alt={`Bild ${currentIndex + 1}`} className="max-h-[90vh] max-w-[90vw]" onClick={(e) => e.stopPropagation()} /> <button onClick={(e) => { e.stopPropagation(); goToNext(); }} className="absolute right-4 text-white text-4xl p-4">&#8250;</button> </div> ); };
const GalerieDetailPage = ({ galleryId, navigateTo }) => { /* ... unverändert ... */ const { galleries, images } = useFirestore(); const [lightboxIndex, setLightboxIndex] = useState(null); const gallery = galleries.find(g => g.id === galleryId); const galleryImages = images[galleryId] || []; if (!gallery) return <PageLayout><div className="text-center py-40">Galerie nicht gefunden.</div></PageLayout>; return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32 relative z-10"> <button onClick={() => navigateTo({ page: 'galerie' })} className="text-amber-400 mb-8">&larr; Zurück zur Übersicht</button> <PageTitle title={gallery.title} subtitle={new Date(gallery.eventDate).toLocaleDateString('de-DE', { dateStyle: 'long' })}/> <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"> {galleryImages.map((image, index) => ( <div key={image.id} className="aspect-w-1 aspect-h-1 cursor-pointer" onClick={() => setLightboxIndex(index)}> <img src={image.url} alt={`Bild ${index + 1}`} className="w-full h-full object-cover rounded-lg" /> </div> ))} </div> </div> {lightboxIndex !== null && <Lightbox images={galleryImages} startIndex={lightboxIndex} onClose={() => setLightboxIndex(null)} />} </PageLayout> ); };
const ImageUploader = ({ galleryId }) => { /* ... unverändert ... */ const { addImagesToGallery } = useFirestore(); const [files, setFiles] = useState([]); const [uploading, setUploading] = useState(false); const [uploadProgress, setUploadProgress] = useState({}); const handleFileChange = (e) => { setFiles(prev => [...prev, ...Array.from(e.target.files)]); }; const handleUpload = async () => { setUploading(true); const newUploadProgress = {}; files.forEach(file => { newUploadProgress[file.name] = 0; }); setUploadProgress(newUploadProgress); for (const file of files) { for (let i = 0; i <= 100; i += 10) { await new Promise(res => setTimeout(res, 50)); setUploadProgress(prev => ({...prev, [file.name]: i})); } } addImagesToGallery(galleryId, files); setFiles([]); setUploading(false); }; return ( <Card className="mt-6 p-6"> <h3 className="text-xl font-bold text-white mb-4">Bilder hochladen</h3> <div className="border-2 border-dashed border-slate-600 rounded-lg p-8 text-center"> <input type="file" multiple onChange={handleFileChange} className="hidden" id={`file-upload-${galleryId}`} /> <label htmlFor={`file-upload-${galleryId}`} className="btn-primary cursor-pointer">Bilder auswählen</label> <p className="text-slate-500 text-sm mt-2">oder per Drag & Drop hierher ziehen</p> </div> {files.length > 0 && ( <div className="mt-6"> <h4 className="font-bold text-white">Ausgewählte Bilder:</h4> <ul className="mt-2 space-y-2"> {files.map((file, i) => ( <li key={i} className="text-sm text-slate-300 bg-slate-700 p-2 rounded flex justify-between items-center"> <span>{file.name}</span> {uploading && ( <div className="w-32 bg-slate-600 rounded-full h-2.5"> <div className="bg-amber-500 h-2.5 rounded-full" style={{ width: `${uploadProgress[file.name] || 0}%` }}></div> </div> )} </li> ))} </ul> <button onClick={handleUpload} disabled={uploading} className="btn-primary mt-4 w-full"> {uploading ? 'Lade hoch...' : `${files.length} Bilder jetzt hochladen`} </button> </div> )} </Card> ); };
const RichTextEditor = ({ content, onSave }) => { /* ... unverändert ... */ const [editorContent, setEditorContent] = useState(content); const Toolbar = () => ( <div className="bg-slate-700 p-2 rounded-t-lg flex space-x-2 border-b border-slate-600"> <button className="p-2 rounded hover:bg-slate-600"><b>B</b></button> <button className="p-2 rounded hover:bg-slate-600"><i>I</i></button> <button className="p-2 rounded hover:bg-slate-600">Liste</button> <button className="p-2 rounded hover:bg-slate-600">Bild</button> </div> ); return ( <Card className="mt-6 p-0"> <Toolbar /> <textarea value={editorContent} onChange={(e) => setEditorContent(e.target.value)} className="input-field h-96" placeholder="Schreiben Sie hier Ihren Text..." /> <div className="p-4 border-t border-slate-700 flex justify-end"> <button onClick={() => onSave(editorContent)} className="btn-primary">Inhalt speichern</button> </div> </Card> ); }

const AdminPage = () => {
    const { user } = useAuth();
    const { events, addEvent, updateEvent, galleries, addGallery, updateGallery, images, pageContent, updatePageContent, backgrounds, updateBackground } = useFirestore();
    const [activeTab, setActiveTab] = useState('termine');
    const [editingEvent, setEditingEvent] = useState(null);
    const [isCreatingEvent, setIsCreatingEvent] = useState(false);
    const [editingGallery, setEditingGallery] = useState(null);
    const [isCreatingGallery, setIsCreatingGallery] = useState(false);
    const [managingGallery, setManagingGallery] = useState(null);
    const [editingContentKey, setEditingContentKey] = useState('kirmes');
    const [editingBgKey, setEditingBgKey] = useState('home');
    const [currentBg, setCurrentBg] = useState(backgrounds[editingBgKey]);
    
    useEffect(() => {
        setCurrentBg(backgrounds[editingBgKey]);
    }, [editingBgKey, backgrounds]);

    const handleSaveEvent = (eventData) => { if (eventData.id) { updateEvent(eventData); } else { addEvent(eventData); } setEditingEvent(null); setIsCreatingEvent(false); };
    const handleSaveGallery = (galleryData) => { if (galleryData.id) { updateGallery(galleryData); } else { addGallery(galleryData); } setEditingGallery(null); setIsCreatingGallery(false); };
    const handleSaveContent = (content) => { updatePageContent(editingContentKey, content); alert('Inhalt gespeichert!'); };
    const handleSaveBackground = () => { updateBackground(editingBgKey, currentBg); alert('Hintergrund gespeichert!'); };

    if (managingGallery) { /* ... unverändert (Galerie-Detail-Verwaltung)... */ const gallery = galleries.find(g => g.id === managingGallery); const galleryImages = images[gallery.id] || []; return ( <PageLayout> <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32"> <button onClick={() => setManagingGallery(null)} className="text-amber-400 mb-8">&larr; Zurück zur Übersicht</button> <h1 className="text-3xl font-bold text-white">Galerie verwalten: {gallery.title}</h1> <ImageUploader galleryId={gallery.id} /> <div className="mt-8"> <h2 className="text-2xl font-bold text-white mb-4">Bilder in dieser Galerie</h2> <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"> {galleryImages.map(img => ( <div key={img.id} className="aspect-w-1 aspect-h-1"><img src={img.url} className="w-full h-full object-cover rounded-lg"/></div> ))} </div> </div> </div> </PageLayout> ); }

    return (
        <PageLayout>
            <div className="container mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32"><PageTitle title="Admin-Dashboard" subtitle={`Willkommen zurück, ${user?.displayName}!`} /><div className="max-w-5xl mx-auto"><div className="border-b border-slate-700 mb-8"><nav className="-mb-px flex space-x-8 overflow-x-auto"><button onClick={() => setActiveTab('termine')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'termine' ? 'border-amber-500 text-amber-400' : 'border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-500'}`}>Termine</button><button onClick={() => setActiveTab('galerien')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'galerien' ? 'border-amber-500 text-amber-400' : 'border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-500'}`}>Galerien</button><button onClick={() => setActiveTab('inhalte')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'inhalte' ? 'border-amber-500 text-amber-400' : 'border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-500'}`}>Inhalte</button><button onClick={() => setActiveTab('design')} className={`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeTab === 'design' ? 'border-amber-500 text-amber-400' : 'border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-500'}`}>Design</button></nav></div>
            {activeTab === 'termine' && (<div>{/* ... unverändert ... */}</div>)}
            {activeTab === 'galerien' && (<div>{/* ... unverändert ... */}</div>)}
            {activeTab === 'inhalte' && (<div><h2 className="text-2xl font-bold text-white mb-4">Seiteninhalte bearbeiten</h2><div className="mb-4"><label htmlFor="page-select-content" className="block text-sm font-medium text-slate-300 mb-2">Seite auswählen:</label><select id="page-select-content" value={editingContentKey} onChange={(e) => setEditingContentKey(e.target.value)} className="input-field"><option value="kirmes">Kirmes</option></select></div><RichTextEditor content={pageContent[editingContentKey]} onSave={handleSaveContent} /></div>)}
            {activeTab === 'design' && (<div><h2 className="text-2xl font-bold text-white mb-4">Hintergründe verwalten</h2><div className="mb-4"><label htmlFor="page-select-bg" className="block text-sm font-medium text-slate-300 mb-2">Seite auswählen:</label><select id="page-select-bg" value={editingBgKey} onChange={(e) => setEditingBgKey(e.target.value)} className="input-field">{Object.keys(backgrounds).map(key => <option key={key} value={key}>{key.charAt(0).toUpperCase() + key.slice(1)}</option>)}</select></div><Card className="p-6 mt-4"><div className="space-y-4"><div><p className="text-sm font-medium text-slate-300 mb-2">Hintergrund-Typ</p><div className="flex space-x-4"><label><input type="radio" name="bg-type" value="image" checked={currentBg.type === 'image'} onChange={() => setCurrentBg({...currentBg, type: 'image'})} /> Bild</label><label><input type="radio" name="bg-type" value="video" checked={currentBg.type === 'video'} onChange={() => setCurrentBg({...currentBg, type: 'video'})} /> Video</label></div></div><div><label className="block text-sm font-medium text-slate-300 mb-2">URL zum Hintergrund</label><input type="text" value={currentBg.url} onChange={(e) => setCurrentBg({...currentBg, url: e.target.value})} className="input-field" /></div><div className="flex justify-end"><button onClick={handleSaveBackground} className="btn-primary">Hintergrund speichern</button></div></div></Card></div>)}
            </div></div>
        </PageLayout>
    );
};

// --- Haupt-App-Komponente ---
function AppContent() {
    const [currentPage, setCurrentPage] = useState({ page: 'home' });
    const { user, loading } = useAuth();
    const navigateTo = (pageInfo) => { if (pageInfo.page === 'admin' && !user) { setCurrentPage({ page: 'login' }); } else { setCurrentPage(pageInfo); } window.scrollTo(0, 0); };
    if (loading) { return <div className="min-h-screen flex items-center justify-center bg-slate-900 text-white">Lade...</div> }
    const renderPage = () => {
        switch (currentPage.page) {
            case 'home': return <HomePage navigateTo={navigateTo} />; 
            case 'termine': return <TerminePage />; 
            case 'galerie': return <GaleriePage navigateTo={navigateTo} />; 
            case 'galleryDetail': return <GalerieDetailPage galleryId={currentPage.galleryId} navigateTo={navigateTo} />;
            case 'kirmes': return <ContentPage pageKey="kirmes" title="Kirmes" subtitle="Alle Informationen rund um das Highlight des Jahres." />; 
            case 'verein': return <UnserVereinPage />; 
            case 'brauchtum': return <BrauchtumPage />;
            case 'ortsvereine': return <OrtsvereinePage />;
            case 'login': return user ? <AdminPage /> : <LoginPage navigateTo={navigateTo} />; 
            case 'admin': return user ? <AdminPage /> : <LoginPage navigateTo={navigateTo} />;
            default: return <HomePage navigateTo={navigateTo} />;
        }
    };
    return (<><Header navigateTo={navigateTo} activePage={currentPage} /><main className="bg-slate-900 relative"><DynamicBackground pageKey={currentPage.page} />{renderPage()}</main><Footer navigateTo={navigateTo} /></>);
}

export default function App() {
    return (
        <AuthProvider>
            <FirestoreProvider>
                <style>{`
                    body { font-family: 'Inter', sans-serif; background-color: #0F172A; color: #E2E8F0; }
                    .bg-grid-pattern { background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px); background-size: 2rem 2rem; }
                    .text-gradient { background: linear-gradient(to right, #FBBF24, #F59E0B); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
                    .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
                    .fade-in { animation: fadeIn 1s ease-out forwards; opacity: 0; }
                    @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
                    @keyframes fadeIn { to { opacity: 1; } }
                    ::-webkit-scrollbar { width: 8px; }
                    ::-webkit-scrollbar-track { background: #1E293B; }
                    ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
                    ::-webkit-scrollbar-thumb:hover { background: #5a6a7e; }
                    
                    .btn-primary { 
                        background: linear-gradient(to right, #F59E0B, #D97706);
                        color: white; font-weight: 700;
                        padding: 0.75rem 1.5rem; border-radius: 0.5rem;
                        transition: all 0.3s ease-in-out;
                        transform-origin: center;
                        border: 1px solid #F59E0B;
                        box-shadow: 0 4px 15px rgba(245, 158, 11, 0.2);
                        cursor: pointer;
                    }
                    .btn-primary:hover {
                        transform: scale(1.05);
                        box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3);
                    }
                    .btn-primary:disabled { background: #334155; cursor: not-allowed; box-shadow: none; }

                    .btn-secondary {
                        background-color: #334155;
                        color: #cbd5e1;
                        font-weight: 600;
                        padding: 0.5rem 1rem; border-radius: 0.5rem;
                        transition: all 0.2s ease;
                        cursor: pointer;
                    }
                    .btn-secondary:hover { background-color: #475569; color: white; }

                    .input-field {
                        width: 100%;
                        background-color: #1e293b;
                        border: 1px solid #334155;
                        border-radius: 0.5rem;
                        padding: 0.75rem;
                        color: white;
                        transition: border-color 0.2s, box-shadow 0.2s;
                    }
                    .input-field:focus {
                        outline: none;
                        border-color: #F59E0B;
                        box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
                    }
                    
                    .card-hover-effect { transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease; }
                    .card-hover-effect:hover { transform: translateY(-8px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); border-color: #475569; }
                    
                    .nav-link::after {
                        content: '';
                        position: absolute;
                        width: 100%;
                        transform: scaleX(0);
                        height: 2px;
                        bottom: 0;
                        left: 0;
                        background-color: #F59E0B;
                        transform-origin: bottom right;
                        transition: transform 0.25s ease-out;
                    }
                    .nav-link:hover::after {
                        transform: scaleX(1);
                        transform-origin: bottom left;
                    }

                    input[type="datetime-local"]::-webkit-calendar-picker-indicator, input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(0.8); cursor: pointer; }
                    .aspect-w-1 { position: relative; padding-bottom: 100%; }
                    .aspect-w-1 > * { position: absolute; height: 100%; width: 100%; top: 0; right: 0; bottom: 0; left: 0; }
                    .prose { color: #cbd5e1; }
                    .prose h1, .prose h2, .prose h3, .prose strong { color: #f8fafc; }
                    .prose ul > li::before { background-color: #F59E0B; }
                    .prose a { color: #FBBF24; text-decoration: none; transition: color 0.2s; }
                    .prose a:hover { color: #F59E0B; }
                    .prose blockquote { border-left-color: #475569; }
                    .prose img { border-radius: 0.5rem; margin-top: 2em; margin-bottom: 2em; }
                `}</style>
                <AppContent />
            </FirestoreProvider>
        </AuthProvider>
    );
}

